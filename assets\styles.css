:root{
  --pine: #0f5f33;
  --night: #0b1224;
  --bg: radial-gradient(1200px 820px at 20% -10%, rgba(255,103,103,.22) 0%, rgba(255,255,255,0) 52%),
        radial-gradient(1100px 760px at 110% 0%, rgba(240,201,74,.20) 0%, rgba(255,255,255,0) 55%),
        radial-gradient(1000px 760px at 20% 110%, rgba(15,95,51,.20) 0%, rgba(255,255,255,0) 56%),
        linear-gradient(180deg, var(--night) 0%, #2a1230 38%, #fff5f7 82%, #fff 100%);
  --text: #4a2430;
  --muted: #6b3f4a;
  --accent: #b21f3a;
  --gold: #c7a204;
  --card-bg: rgba(255,255,255,0.68);
  --shadow: 0 10px 30px rgba(178,31,58,0.18);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: 'PingFang SC','Microsoft YaHei','Noto Sans SC',system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--text); background:var(--bg); overflow-x:hidden;
}

body::before{
  content:"";
  position:fixed; inset:-20%; z-index:0; pointer-events:none;
  background:
    radial-gradient(520px 420px at 20% 30%, rgba(255,103,103,.25) 0%, rgba(255,103,103,0) 60%),
    radial-gradient(560px 460px at 80% 20%, rgba(240,201,74,.22) 0%, rgba(240,201,74,0) 62%),
    radial-gradient(520px 420px at 70% 85%, rgba(178,31,58,.18) 0%, rgba(178,31,58,0) 60%);
  filter: blur(10px);
  animation: aurora 10s ease-in-out infinite alternate;
}

@keyframes aurora{
  0%{ transform: translate3d(-1%, -1%, 0) rotate(-2deg) scale(1.02) }
  100%{ transform: translate3d(1%, 1%, 0) rotate(2deg) scale(1.06) }
}

#snow{position:fixed; inset:0; z-index:0; pointer-events:none}
#fx{position:fixed; inset:0; z-index:2; pointer-events:none}

.decorations{
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
}

.decor{
  position:absolute;
  width: 170px;
  opacity: .85;
  filter:
    drop-shadow(0 18px 28px rgba(0,0,0,.18))
    drop-shadow(0 0 22px rgba(240,201,74,.18));
}

.decor svg{width:100%; height:auto; display:block}

.decor--tl{left:10px; top:8px; width:120px; opacity:.72}
.decor--tr{right:10px; top:6px; width:120px; opacity:.70}
.decor--bl{left:10px; bottom:8px; width:170px; opacity:.88}
.decor--br{right:10px; bottom:8px; width:170px; opacity:.88}

@media (max-width:520px){
  .decor--tl,.decor--tr{width:98px; opacity:.62}
  .decor--bl,.decor--br{width:140px; opacity:.78}
}

.wrap{position:relative; z-index:1; min-height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:48px 16px}

.card{
  width:min(720px, 92vw); background:var(--card-bg); backdrop-filter: blur(12px) saturate(1.1);
  border:1px solid rgba(255,255,255,0.6); border-radius:24px; box-shadow:var(--shadow);
  padding:28px 22px 20px; text-align:center;
  position:relative;
}

.card::after{
  content:"";
  position:absolute; inset:-1px; border-radius:24px; pointer-events:none;
  background: linear-gradient(120deg, rgba(240,201,74,.55), rgba(255,255,255,0), rgba(178,31,58,.35));
  opacity:.35;
  mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  padding:1px;
}

.hero .title{
  margin:4px 0 6px; font-size:36px; line-height:1.15; letter-spacing:1px;
  background: linear-gradient(100deg,#7a1a2a 0%, #b21f3a 40%, #f0c94a 50%, #b21f3a 60%, #7a1a2a 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  background-size: 220% 100%;
  animation: shimmer 5s ease-in-out infinite;
}
@keyframes shimmer{ 0%,100%{ background-position:0% 50% } 50%{ background-position:100% 50% } }
.subtitle{margin:0; color:var(--muted)}

.apple{margin:14px auto 6px; width:min(260px, 68vw); animation:bob 3.5s ease-in-out infinite;}
.apple svg{width:100%; height:auto; display:block}
@keyframes bob{ 0%,100%{ transform:translateY(0)} 50%{ transform:translateY(-6px)} }

/* Orbit container */
.orbital{
  position:relative;
  width: min(520px, 92vw);
  height: min(520px, 92vw);
  margin: 10px auto 0;
  display:grid;
  place-items:center;
  perspective: 900px;
  perspective-origin: 50% 45%;
  transform-style: preserve-3d;
  --tiltX: 0deg;
  --tiltY: 0deg;
}

.orbital::before{
  content:"";
  position:absolute;
  inset: 8%;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%, rgba(240,201,74,.18), rgba(178,31,58,0) 60%),
              conic-gradient(from 0deg, rgba(240,201,74,.25), rgba(178,31,58,.18), rgba(255,255,255,0), rgba(240,201,74,.22));
  filter: blur(2px);
  opacity:.9;
  animation: orbitGlow 6s ease-in-out infinite, ringSpin 18s linear infinite;
}

@keyframes orbitGlow{
  0%,100%{ transform: scale(1); opacity:.75 }
  50%{ transform: scale(1.03); opacity:1 }
}

@keyframes ringSpin{
  from{ rotate: 0deg }
  to{ rotate: 360deg }
}

.apple{
  position:relative;
  margin:0;
  width: min(280px, 62vw);
  filter: drop-shadow(0 18px 30px rgba(178,31,58,.25)) drop-shadow(0 0 22px rgba(240,201,74,.25));
  cursor:pointer;
  user-select:none;
}

.apple:focus-visible{
  outline: none;
  filter:
    drop-shadow(0 18px 30px rgba(178,31,58,.25))
    drop-shadow(0 0 26px rgba(240,201,74,.55))
    drop-shadow(0 0 2px rgba(255,255,255,.9));
}

.apple:active{ transform: scale(.99); }

.apple::after{
  content:"";
  position:absolute;
  width: min(320px, 72vw);
  height: 34px;
  left: 50%;
  top: calc(100% - 8px);
  transform: translateX(-50%);
  background: radial-gradient(closest-side, rgba(178,31,58,.28), rgba(178,31,58,0));
  filter: blur(2px);
}

.blessing{margin:10px auto 14px; padding:0 8px}
.to-line{font-size:16px; color:#7a3a00; margin:0 0 6px}
.message{font-size:18px; line-height:1.6; margin:0;}
.from-line{font-size:15px; color:#7a3a00; margin:10px 0 0}

.wish-list{
  list-style:none;
  padding:0;
  margin:0;
}

/* Orbit ring */
.orbit{
  position:absolute;
  inset:0;
  border-radius: 999px;
  pointer-events:none;
  transform-style: preserve-3d;
  /* JS drives --spinY so we can keep text facing camera */
  transform: translateZ(0) rotateX(calc(18deg + var(--tiltX))) rotateY(calc(var(--spinY, 0deg) + var(--tiltY)));
}

.orbit li{
  position:absolute;
  left:50%;
  top:50%;
  width: min(210px, 46vw);
  padding:10px 12px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55));
  border: 1px solid rgba(227,201,136,.62);
  color: rgba(74,36,48,.93);
  box-shadow:
    0 16px 30px rgba(178,31,58,.10),
    0 0 0 1px rgba(240,201,74,.12) inset;
  transform-style: preserve-3d;
  transform:
    translate(-50%, -50%)
    rotateY(var(--a))
    translateZ(var(--r))
    translateY(var(--y));
  transform-origin: 0 0;
  opacity:0;
  filter: blur(2px);
}

.orbit li > span{
  display:block;
  /* Face the camera: counter-rotate by total angle (base + spin) */
  transform: rotateY(calc(-1 * var(--at, var(--a))));
  transform-style: preserve-3d;
}

.orbit li::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:16px;
  background: conic-gradient(from 0deg, rgba(240,201,74,.55), rgba(255,255,255,0), rgba(178,31,58,.35), rgba(255,255,255,0), rgba(240,201,74,.55));
  opacity:.25;
  filter: blur(6px);
  z-index:-1;
}

.orbit li.show{
  opacity: var(--o, 1);
  filter: blur(var(--blur, 0px));
  animation: popIn .7s cubic-bezier(.2,1.2,.2,1) both;
}

@keyframes popIn{
  0%{ transform:
      translate(-50%, -50%)
      rotateY(var(--a))
      translateZ(calc(var(--r) - 14px))
      translateY(calc(var(--y) + 6px))
      scale(.92);
      opacity:0;
  }
  60%{ opacity:1 }
  100%{ transform:
      translate(-50%, -50%)
      rotateY(var(--a))
      translateZ(var(--r))
      translateY(var(--y))
      scale(1);
  }
}

/* Little twinkles around orbit */
.orbital .twinkle{
  position:absolute;
  width:6px;height:6px;
  border-radius:999px;
  background: radial-gradient(circle, rgba(255,255,255,.95), rgba(255,255,255,0) 70%);
  filter: drop-shadow(0 0 10px rgba(240,201,74,.65));
  opacity:.0;
  animation: twinkle 2.4s ease-in-out infinite;
}

@keyframes twinkle{
  0%,100%{ opacity:0; transform: scale(.8) }
  45%{ opacity:.9; transform: scale(1.2) }
}

.actions{display:flex; gap:12px; justify-content:center; margin:16px 0 8px; flex-wrap:wrap}
.btn{appearance:none; border:1px solid transparent; padding:10px 16px; border-radius:12px; cursor:pointer; font-size:15px; transition:.2s;}
.btn.primary{background:linear-gradient(180deg,#e94b5a,#b21f3a); color:#fff; box-shadow:0 8px 16px rgba(178,31,58,.25)}
.btn.primary:hover{filter:brightness(1.05)}
.btn.ghost{background:transparent; border-color:#d8b26a; color:#7a3a00}
.btn.ghost:hover{background:rgba(250,230,170,.35)}

#audioBtn[aria-pressed="true"]{
  background: rgba(250,230,170,.45);
  border-color:#d1a62a;
}

.custom{margin-top:8px; text-align:left; background:rgba(255,255,255,.7); border:1px dashed #e3c988; border-radius:14px; padding:14px}
.hidden{display:none}
.custom .row{display:flex; gap:12px; flex-wrap:wrap}
.custom label{display:flex; flex-direction:column; gap:6px; flex:1}
.custom label.full{width:100%}
.custom input, .custom textarea{padding:10px 12px; border-radius:10px; border:1px solid #e6d7a9; font-size:15px; outline:none; background:#fffdf6}
.custom input:focus, .custom textarea:focus{border-color:#d1a62a; box-shadow:0 0 0 3px rgba(209,166,42,.15)}
.tip{color:#7a3a00; font-size:13px; margin:8px 0 2px}

.foot{margin-top:18px; color:#704553; font-size:13px}

/* Reveal animation */
.reveal{opacity:0; transform: translateY(10px); filter: blur(2px);}
.reveal.is-visible{opacity:1; transform: translateY(0); filter: blur(0); transition: opacity .7s ease, transform .7s ease, filter .7s ease;}

@media (prefers-reduced-motion: reduce){
  body::before{animation:none}
  .hero .title{animation:none}
  .apple{animation:none}
  .reveal{opacity:1; transform:none; filter:none}
  .orbital::before{animation:none}
  .orbit{animation:none}
  .orbit li > span{animation:none; transform: rotateY(calc(-1 * var(--at, var(--a)))) }
  .orbit li{opacity:1; filter:none}
  .orbit li.show{animation:none}
}

@media (max-width:420px){
  .hero .title{font-size:30px}
  .message{font-size:17px}
}
